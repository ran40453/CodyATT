<style>
    :root {
        /* 色彩語義化系統 */
        --color-primary: #007AFF;
        --color-success: #34C759;
        --color-warning: #FF9500;
        --color-danger: #FF3B30;
        --color-info: #5AC8FA;

        /* 功能色彩 */
        --color-ot-primary: rgba(160, 231, 160, 0.9);
        /* 1.67 綠色 */
        --color-ot-secondary: rgba(255, 200, 124, 0.9);
        /* 其他橘色 */
        --color-weekend: rgba(0, 0, 0, 0.52);
        /* 週末深灰 */
        --color-salary: rgba(255, 235, 59, 0.96);
        /* 月薪黃色 */
        --color-header-gradient: linear-gradient(135deg,
                rgba(255, 235, 59, 0.92),
                rgba(160, 231, 160, 0.9),
                rgba(255, 200, 124, 0.9));

        /* Material Design Elevation 陰影系統 */
        --elevation-0: none;
        --elevation-1: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
        --elevation-2: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
        --elevation-3: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);
        --elevation-4: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
        --elevation-5: 0 19px 38px rgba(0, 0, 0, 0.30), 0 15px 12px rgba(0, 0, 0, 0.22);

        /* 動畫時間曲線 */
        --duration-instant: 0.08s;
        --duration-fast: 0.15s;
        --duration-normal: 0.20s;
        --duration-slow: 0.30s;
        --easing-standard: cubic-bezier(0.4, 0.0, 0.2, 1);
        --easing-decelerate: cubic-bezier(0.0, 0.0, 0.2, 1);
        --easing-accelerate: cubic-bezier(0.4, 0.0, 1, 1);

        /* iOS San Francisco 字型系統 */
        --font-system: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text",
            "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }

    html {
        max-width: 100%;
        overflow-x: hidden;
        margin: 0;
    }

    /* 全局樣式 */
    body {
        font-family: var(--font-system);
        background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);
        padding: 0;
        /* 移除預設 padding */
        margin: 0;
        max-width: 100%;
        overflow-x: hidden;
    }

    /* 分頁導航列 (Sidebar for Desktop) */
    .tab-navigation {
        display: flex;
        flex-direction: column;
        gap: 12px;
        padding: 20px 16px;
        background: rgba(245, 247, 250, 0.95);
        /* 更柔和的背景 */
        backdrop-filter: blur(30px) saturate(180%);
        -webkit-backdrop-filter: blur(30px) saturate(180%);
        border-right: 1px solid rgba(200, 210, 220, 0.3);
        box-shadow: 2px 0 30px rgba(0, 0, 0, 0.03);

        /* 固定在左側 */
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        width: 240px;
        z-index: 1000;
        margin: 0;
        border-radius: 0;
    }

    @media (max-width: 768px) {
        .tab-navigation {
            flex-direction: row;
            position: sticky;
            top: 0;
            left: 0;
            right: 0;
            bottom: auto;
            width: 100%;
            height: auto;
            padding: 10px 16px;
            border-right: none;
            border-bottom: 1px solid rgba(200, 210, 220, 0.3);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);
            background: rgba(255, 255, 255, 0.95);
            z-index: 1000;
        }
    }

    .tab-btn {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        padding: 12px 16px;
        border: none;
        border-radius: 12px;
        background: transparent;
        color: rgba(0, 0, 0, 0.6);
        font-family: var(--font-system);
        font-weight: 600;
        font-size: 0.9rem;
        cursor: pointer;
        transition: all var(--duration-normal) var(--easing-standard);
        position: relative;
        overflow: hidden;
    }

    .tab-btn.active {
        background: rgba(255, 255, 255, 0.95);
        color: var(--color-primary);
        box-shadow: var(--elevation-2);
    }

    .tab-btn:hover:not(.active) {
        background: rgba(255, 255, 255, 0.5);
        transform: translateY(-1px);
    }

    .tab-btn:active {
        transform: translateY(0);
    }

    /* Tab 內容區塊 */
    .tab-content {
        display: none;
    }

    .tab-content.active {
        display: block;
        animation: fadeIn var(--duration-normal) var(--easing-decelerate);
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(8px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .container {
        display: flex;
        gap: 56px;
        /* 增加左右卡片間距，避免重疊 */
        align-items: flex-start;
        /* 左側置頂 */
    }

    /* 左側區域 */
    .left-panel {
        display: flex;
        flex-direction: column;
        gap: 10px;
        width: 250px;
        position: sticky;
        top: 20px;
        /* 置頂 */
        height: fit-content;
    }

    /* 卡片樣式 */
    .card {
        width: 250px;
        padding: 20px;
        border-radius: 24px;
        background: rgba(255, 255, 255, 0.14);
        backdrop-filter: blur(18px) saturate(160%);
        -webkit-backdrop-filter: blur(18px) saturate(160%);
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.18);
        border: 1px solid rgba(255, 255, 255, 0.35);
    }

    .logo-card {
        min-height: 30px;
        /* 高度接近上方新增列 */
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .logo-card .logo-image {
        display: block;
        width: 50%;
        height: auto;
        object-fit: contain;
    }

    .card h3 {
        text-align: center;
        margin-bottom: 15px;
    }

    /* Dashboard 膠囊 */
    .capsule-column {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        /* 膠囊靠右 */
        gap: 6px;
    }

    .capsule-row {
        display: flex;
        justify-content: space-between;
        width: 100%;
        align-items: center;
    }

    .capsule-row .label {
        flex: 1;
        text-align: left;
        /* 標題靠左 */
        font-size: 0.9rem;
        /* Base / Travel / OT 標題字體一致 */
    }

    /* 膠囊顏色 */
    .capsule.black {
        background: linear-gradient(135deg, rgba(0, 0, 0, 0.92), rgba(32, 32, 32, 0.92));
        color: #fff;
        font-weight: bold;
        border-color: rgba(255, 255, 255, 0.25);
    }

    .capsule.black.total-value {
        background: linear-gradient(135deg, rgba(85, 85, 85, 0.95), rgba(40, 40, 40, 0.95));
    }

    .capsule.dark-gray {
        background: linear-gradient(135deg, rgba(85, 85, 85, 0.95), rgba(40, 40, 40, 0.95));
        color: #fff;
    }

    .capsule.yellow {
        background: linear-gradient(135deg,
                rgba(255, 235, 59, 0.96),
                rgba(255, 235, 59, 0.8));
        color: #000;
        font-weight: bold;
        border-color: rgba(255, 235, 59, 0.9);
    }

    /* 按鈕 */
    button,
    .icon-button {
        width: 100%;
        margin: 5px 0;
        padding: 10px 14px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.45);
        background: linear-gradient(135deg,
                rgba(0, 122, 255, 0.95),
                rgba(0, 122, 255, 0.75));
        color: #fff;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.12s ease, box-shadow 0.18s ease, background 0.18s ease;
        box-shadow: 0 10px 24px rgba(0, 0, 0, 0.22);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
    }

    button:hover,
    .icon-button:hover {
        transform: translateY(-1px);
        box-shadow: 0 14px 30px rgba(0, 0, 0, 0.26);
    }

    button:active,
    .icon-button:active {
        transform: translateY(0);
        box-shadow: 0 8px 18px rgba(0, 0, 0, 0.2);
    }

    /* OT 上下箭頭：覆蓋一般按鈕樣式，縮小並貼在膠囊左右 */
    .ot-arrow {
        width: auto;
        height: auto;
        min-width: 0;
        margin: 0 2px;
        padding: 0;
        border: none;
        border-radius: 0;
        background: transparent;
        box-shadow: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 1rem;
        /* ← 桌面版也放大 */
        line-height: 1;
        cursor: pointer;
        gap: 0;
        color: #000;
    }

    /* 桌面版 OT 調整箭頭 icon 放大一級 */
    .ot-arrow .material-symbols-outlined {
        font-size: 1.4rem;
    }

    .ot-arrow:active,
    .ot-arrow:hover {
        transform: none;
        box-shadow: none;
    }

    .material-symbols-outlined {
        font-variation-settings:
            'FILL' 0,
            'wght' 400,
            'GRAD' 0,
            'opsz' 24;
        font-size: 1.2rem;
    }

    /* 輸入設定卡片內的數字輸入框 */
    .settings-card input[type="number"] {
        width: 100%;
        box-sizing: border-box;
        margin: 4px 0 8px;
        padding: 8px 12px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.45);
        background: rgba(207, 207, 207, 0.95);
        outline: none;
        color: #111;
        font-size: 0.9rem;
    }

    .settings-card input[type="number"]:focus {
        box-shadow: 0 0 0 1px rgba(0, 122, 255, 0.7);
    }

    /* 輸入設定卡片內的國家下拉選單 */
    .settings-card select {
        width: 100%;
        box-sizing: border-box;
        margin: 4px 0 8px;
        padding: 8px 12px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.45);
        background: rgba(207, 207, 207, 0.95);
        outline: none;
        color: #111;
        font-size: 0.9rem;
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
    }

    .settings-card select:focus {
        box-shadow: 0 0 0 1px rgba(0, 122, 255, 0.7);
    }

    /* 設定區按鈕排列 */
    /* 設定區按鈕排列 */
    .settings-actions {
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;
        justify-content: space-between;
        align-items: center;
        gap: 6px;
    }

    /* 設定卡片內的 icon 按鈕，縮成小圓形 */
    .settings-card .icon-button {
        align-self: flex-start;
        width: 44px;
        height: 44px;
        padding: 0;
    }


    .file-label {
        cursor: pointer;
    }

    input[type="file"] {
        display: none;
    }

    /* 右側區域 */
    .right-panel {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 10px;
        overflow: visible;
        /* 讓 thead:sticky 以整個頁面滾動為基準 */
    }


    /* 新增卡片 - Smart Stepper 統一設計 */
    .add-card-circular {
        display: flex;
        gap: 8px;
        align-items: flex-end;
        justify-content: center;
        margin-bottom: 10px;
        position: sticky;
        top: 0;
        background: rgba(255, 255, 255, 0.9);
        padding: 12px;
        border-radius: 18px;
        z-index: 10;
        backdrop-filter: blur(20px) saturate(180%);
        -webkit-backdrop-filter: blur(20px) saturate(180%);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
        border: 1px solid rgba(255, 255, 255, 0.6);
        flex-wrap: nowrap;
        overflow-x: auto;
    }

    .add-card-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
        flex-shrink: 0;
    }

    .add-card-item label {
        font-size: 0.7rem;
        font-weight: 600;
        color: #8e8e93;
        text-align: center;
        white-space: nowrap;
    }

    /* Smart Stepper for Add Card */
    .smart-stepper-add {
        width: 42px;
        height: 42px;
        border-radius: 50%;
        border: 2px solid rgba(0, 0, 0, 0.08);
        background: rgba(255, 255, 255, 0.95);
        text-align: center;
        font-size: 0.8rem;
        font-weight: 700;
        color: #1d1d1f;
        outline: none;
        cursor: ns-resize;
        transition: all 0.2s ease;
        padding: 0;
        user-select: none;
    }

    .smart-stepper-add:hover {
        background: rgba(255, 255, 255, 1);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .smart-stepper-add.active {
        background: var(--color-primary);
        color: white;
        border-color: transparent;
        transform: scale(1.1);
        box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);
        cursor: grabbing;
    }

    .smart-stepper-add.has-value {
        background: rgba(255, 255, 255, 1);
        border-color: rgba(0, 122, 255, 0.3);
    }

    .smart-stepper-add[data-type="date"] {
        border-color: rgba(0, 122, 255, 0.2);
    }

    .smart-stepper-add[data-type="travel"] {
        border-color: rgba(255, 149, 0, 0.2);
        color: var(--color-warning);
    }

    /* 圓形新增按鈕（與其他按鈕同列） */
    .circular-add-btn-round {
        width: 42px;
        height: 42px;
        border-radius: 50%;
        border: none;
        background: linear-gradient(135deg, var(--color-primary) 0%, #5AC8FA 100%);
        color: white;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 8px rgba(0, 122, 255, 0.3);
        flex-shrink: 0;
    }

    .circular-add-btn-round:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(0, 122, 255, 0.4);
    }

    .circular-add-btn-round:active {
        transform: scale(0.95);
    }

    .circular-add-btn-round .material-symbols-outlined {
        font-size: 20px;
    }

    @media (max-width: 768px) {
        .add-card-circular {
            padding: 10px;
            gap: 6px;
        }
    }


    /* 扁平新增按鈕 (全寬第二行) */
    .circular-add-btn-wide {
        width: 100%;
        height: 40px;
        border-radius: 12px;
        border: none;
        background: linear-gradient(135deg, var(--color-primary) 0%, #5AC8FA 100%);
        color: white;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        box-shadow: 0 2px 8px rgba(0, 122, 255, 0.25);
        font-size: 0.9rem;
        font-weight: 600;
    }

    .circular-add-btn-wide:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 122, 255, 0.35);
    }

    .circular-add-btn-wide:active {
        transform: translateY(0);
    }

    .circular-add-btn-wide .material-symbols-outlined {
        font-size: 18px;
    }

    @media (max-width: 768px) {
        .add-card-circular {
            padding: 10px;
            gap: 10px;
        }

        .add-card-row-inputs {
            gap: 6px;
        }
    }

    .add-card-row-inputs {
        display: flex;
        justify-content: center;
        align-items: flex-end;
        gap: 8px;
        flex-wrap: nowrap;
        overflow-x: auto;
    }

    /* 圓形日期輸入 */
    .circular-date-input {
        width: 44px;
        height: 44px;
        border-radius: 50%;
        border: 2px solid rgba(0, 122, 255, 0.2);
        background: rgba(255, 255, 255, 0.95);
        text-align: center;
        font-size: 0.7rem;
        font-weight: 600;
        color: #1d1d1f;
        outline: none;
        transition: all 0.2s ease;
        padding: 0;
    }

    .circular-date-input:focus {
        border-color: var(--color-primary);
        box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        background: white;
    }

    /* 圓形數字輸入 */
    .circular-number-input {
        width: 42px;
        height: 42px;
        border-radius: 50%;
        border: 2px solid rgba(0, 0, 0, 0.08);
        background: rgba(255, 255, 255, 0.95);
        text-align: center;
        font-size: 0.85rem;
        font-weight: 700;
        color: #1d1d1f;
        outline: none;
        transition: all 0.2s ease;
        padding: 0;
    }

    .circular-number-input:focus {
        border-color: var(--color-success);
        box-shadow: 0 0 0 3px rgba(52, 199, 89, 0.1);
        background: white;
    }

    /* 圓形下拉選單 */
    .circular-select {
        width: 42px;
        height: 42px;
        border-radius: 50%;
        border: 2px solid rgba(255, 149, 0, 0.2);
        background: rgba(255, 255, 255, 0.95);
        text-align: center;
        font-size: 0.75rem;
        font-weight: 700;
        color: var(--color-warning);
        outline: none;
        cursor: pointer;
        transition: all 0.2s ease;
        appearance: none;
        -webkit-appearance: none;
        padding: 0;
    }

    .circular-select:focus {
        border-color: var(--color-warning);
        box-shadow: 0 0 0 3px rgba(255, 149, 0, 0.1);
        background: white;
    }

    .add-card-row-inputs {
        gap: 6px;
    }
    }

    /* 新增列中的 Travel toggle 按鈕 */
    #travelToggle {
        flex: 0 0 40px;
        width: 40px;
        height: 40px;
        padding: 0;
        border-radius: 999px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 0.7rem;
        font-weight: 600;
        border: 1px solid rgba(255, 255, 255, 0.45);
        background: linear-gradient(135deg,
                rgba(160, 160, 160, 0.95),
                rgba(120, 120, 120, 0.85));
        color: #222;
    }

    /* Travel 開啟狀態：跟新增 (+) 按鈕一樣藍色，動畫沿用全域 button 規則 */
    #travelToggle.on {
        background: linear-gradient(135deg,
                rgba(0, 122, 255, 0.95),
                rgba(0, 122, 255, 0.75));
        color: #fff;
    }

    /* 表格 */
    table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        margin-top: 10px;
        background: rgba(255, 255, 255, 0.12);
        backdrop-filter: blur(18px) saturate(160%);
        -webkit-backdrop-filter: blur(18px) saturate(160%);
        border-radius: 24px;
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.18);
        border: 1px solid rgba(255, 255, 255, 0.35);
    }

    /* 表格外層容器（使用 #tableSection 作為可滾動區，讓表頭 sticky 生效） */
    #tableSection {
        max-height: calc(100vh - 160px);
        overflow-y: auto;
        position: relative;
    }

    thead {
        background: linear-gradient(135deg,
                rgba(255, 235, 59, 0.92),
                /* yellow */
                rgba(160, 231, 160, 0.9),
                /* green */
                rgba(255, 200, 124, 0.9)
                /* orange */
            );
        backdrop-filter: blur(22px);
        -webkit-backdrop-filter: blur(22px);
    }

    /* 加班總時數與出差天數使用與表頭相同漸層底色，文字改黑色 */
    #totalOT,
    #travelDays {
        background: linear-gradient(135deg,
                rgba(255, 235, 59, 0.92),
                rgba(160, 231, 160, 0.9),
                rgba(255, 200, 124, 0.9));
        color: #111;
    }

    /* 儲存到 Google Sheet 圓形 icon 按鈕（使用 material icon：雲端） */
    #saveToSheetBtn {
        align-self: flex-start;
        width: 44px;
        height: 44px;
        padding: 0;
        border-radius: 999px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg,
                rgba(255, 235, 59, 0.96),
                rgba(255, 235, 59, 0.8));
        color: #000;
        border-color: rgba(255, 235, 59, 0.9);
    }

    /* 儲存按鈕內的雲端圖示大小 */
    #saveToSheetBtn .material-symbols-outlined {
        font-size: 20px;
        line-height: 1;
    }

    th,
    td {
        padding: 10px 12px;
        text-align: center;
        border-bottom: 1px solid rgba(255, 255, 255, 0.18);
        border-right: none;
        position: relative;
        /* 讓刪除按鈕在每個儲存格內定位，避免 Safari 例外行為 */
    }

    th {
        font-weight: 600;
        letter-spacing: 0.02em;
        color: #111;
        font-size: 0.9rem;
    }

    thead th {
        position: sticky;
        /* 標題固定 */
        top: 0;
        /* 以 #tableSection 捲動容器的頂端為準 */
        z-index: 5;
    }

    tbody {
        backdrop-filter: blur(18px);
        -webkit-backdrop-filter: blur(18px);
    }

    tbody tr {
        transition: background 0.18s ease, transform 0.12s ease;
        position: relative;
    }

    /* 尚未載入資料時的占位列 */
    .placeholder-row td {
        padding: 16px 12px;
        background: rgba(255, 255, 255, 0.06);
        border-bottom: 1px solid rgba(255, 255, 255, 0.14);
    }

    .placeholder-row:last-child td {
        border-bottom: none;
    }

    .placeholder-row {
        transition: background 0.18s ease, transform 0.18s ease;
    }

    .placeholder-row:hover {
        background: rgba(255, 255, 255, 0.12);
        transform: translateY(-1px) scale(1.01);
    }

    /* 假表上顯示「載入 CSV」提示（置中大字） */
    .placeholder-load-cell {
        position: relative;
        text-align: center;
        padding: 32px 0;
        overflow: visible;
    }

    /* 載入 CSV 膠囊 */
    .placeholder-pill {
        display: inline-block;
        padding: 10px 24px;
        border-radius: 999px;
        font-size: 1rem;
        font-weight: 700;
        color: #fff;
        background: rgba(0, 0, 0, 0.35);
        box-shadow: 0 10px 24px rgba(0, 0, 0, 0.22);
        transition: transform 0.18s ease, background 0.18s ease, opacity 0.18s ease;
        opacity: 0.96;
    }

    .placeholder-load-cell:hover .placeholder-pill {
        transform: scale(0.94);
        background: rgba(0, 0, 0, 0.5);
    }

    tbody tr:hover {
        background: rgba(255, 255, 255, 0.14);
        transform: translateY(-1px);
    }

    /* 合併費用Total表頭，內容拆分兩欄 */
    th.total-header {
        text-align: center;
    }

    td.total-value {
        font-weight: bold;
        font-size: 1rem;
    }

    td.salary-value {
        /* 月薪數字與 Total 一致 */
        font-weight: bold;
        font-size: 1rem;
    }

    /* 週日列深灰底 */
    tr.sunday,
    .sunday-row td {
        background: rgba(0, 0, 0, 0.52);
        color: #fff;
        backdrop-filter: blur(22px) saturate(180%);
        -webkit-backdrop-filter: blur(22px) saturate(180%);
    }

    /* =========================================
       Material Design 3 Design System
       ========================================= */
    :root {
        /* Color Palette (Material You inspired) */
        --md-sys-color-surface: #ffffff;
        --md-sys-color-surface-container: #f0f4f8;
        /* Light blue-grey tint */
        --md-sys-color-on-surface: #191c20;
        --md-sys-color-on-surface-variant: #444746;
        --md-sys-color-primary: #0061a4;
        --md-sys-color-on-primary: #ffffff;
        --md-sys-color-primary-container: #d1e4ff;
        --md-sys-color-on-primary-container: #001d36;
        --md-sys-color-secondary-container: #dbe4f0;
        --md-sys-color-on-secondary-container: #101c2b;
        --md-sys-color-outline: #747775;
        --md-sys-color-outline-variant: #c4c7c5;

        /* Elevation */
        --md-sys-elevation-0: 0px 0px 0px 0px rgba(0, 0, 0, 0);
        --md-sys-elevation-1: 0px 1px 2px 0px rgba(0, 0, 0, 0.3), 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
        --md-sys-elevation-2: 0px 1px 2px 0px rgba(0, 0, 0, 0.3), 0px 2px 6px 2px rgba(0, 0, 0, 0.15);

        /* Shape */
        --md-sys-shape-corner-medium: 16px;
        --md-sys-shape-corner-large: 24px;
        --md-sys-shape-corner-full: 999px;

        /* Typography */
        --md-sys-typescale-title-medium: 500 1rem/1.5rem 'Inter', sans-serif;
        --md-sys-typescale-body-medium: 400 0.875rem/1.25rem 'Inter', sans-serif;
        --md-sys-typescale-body-small: 400 0.75rem/1rem 'Inter', sans-serif;
        --md-sys-typescale-label-large: 500 0.875rem/1.25rem 'Inter', sans-serif;
    }

    /* Container Reset */
    #tableContainer {
        display: flex;
        flex-direction: column;
        gap: 12px;
        padding: 16px 0;
        width: 100%;
        max-width: 800px;
        /* Optimal reading width */
        margin: 0 auto;
    }

    /* Weekday Header (Desktop Only) */
    .calendar-header {
        display: none;
        /* Hidden on mobile */
        grid-template-columns: repeat(7, 1fr);
        gap: 12px;
        margin-bottom: 8px;
        padding: 0;
        /* Match container padding (0) for alignment */
    }

    .calendar-weekday-label {
        text-align: center;
        font: var(--md-sys-typescale-label-large);
        color: var(--md-sys-color-on-surface-variant);
        text-transform: uppercase;
    }

    /* =========================================
       Data Card Component
       ========================================= */
    .data-card {
        background-color: var(--md-sys-color-surface);
        border-radius: var(--md-sys-shape-corner-medium);
        box-shadow: var(--md-sys-elevation-1);
        padding: 0;
        /* Inner layout handles padding */
        overflow: hidden;
        transition: box-shadow 0.2s ease, transform 0.2s ease;
        position: relative;
        border: 1px solid rgba(0, 0, 0, 0.05);
    }

    .data-card:active {
        box-shadow: var(--md-sys-elevation-2);
        transform: scale(0.995);
    }

    /* Card Header (Always Visible) */
    .card-header {
        padding: 16px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        background: transparent;
        flex-wrap: wrap;
        /* Allow wrapping for small screens if needed */
        gap: 8px;
    }

    .card-primary-info {
        display: flex;
        align-items: center;
        gap: 12px;
        flex: 1;
    }

    .card-date {
        font: var(--md-sys-typescale-title-medium);
        font-size: 1.1rem;
        color: var(--md-sys-color-on-surface);
        font-weight: 600;
    }

    /* Scoreboard Badge */
    .scoreboard-badge {
        background: #000000;
        color: #ffffff;
        padding: 4px 10px;
        border-radius: 999px;
        font-family: 'Inter', monospace;
        /* Monospace for numbers */
        font-weight: 700;
        font-size: 0.9rem;
        min-width: 40px;
        text-align: center;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    /* Scoreboard Colors */
    .scoreboard-badge.green {
        color: #4ade80;
    }

    /* 2 */
    .scoreboard-badge.yellow {
        color: #facc15;
    }

    /* 3 */
    .scoreboard-badge.orange {
        color: #fb923c;
    }

    /* 4 */
    .scoreboard-badge.red {
        color: #f87171;
    }

    /* 5 */
    .scoreboard-badge.purple {
        color: #c084fc;
    }

    /* >6 */

    .card-secondary-info {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .info-chip {
        display: flex;
        align-items: center;
        gap: 4px;
        font-size: 0.85rem;
        color: var(--md-sys-color-on-surface-variant);
        background: var(--md-sys-color-surface-container);
        padding: 4px 8px;
        border-radius: 8px;
    }

    /* Daily OT Salary Style */
    .info-chip.yellow {
        background: #facc15;
        color: #000000;
        font-weight: 600;
    }

    .info-chip .material-symbols-outlined {
        font-size: 16px;
    }

    .card-expand-icon {
        color: var(--md-sys-color-on-surface-variant);
        transition: transform 0.3s ease;
        margin-left: auto;
        /* Push to right */
    }

    .data-card.expanded .card-expand-icon {
        transform: rotate(180deg);
    }

    /* Card Body (Expandable) */
    .card-body {
        display: none;
        /* Toggled via JS */
        padding: 0 16px 16px 16px;
        animation: slideDown 0.3s ease forwards;
        border-top: 1px solid var(--md-sys-color-surface-container);
        margin-top: -8px;
        /* Visual tweak */
        padding-top: 16px;
    }

    .data-card.expanded .card-body {
        display: block;
    }

    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Grid Layout for Hours - Now 2 columns for circular steppers (2x2) */
    .hours-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        /* 2 columns */
        gap: 12px;
        margin-bottom: 16px;
        justify-items: center;
        max-width: 200px;
        /* Limit width to keep them close */
        margin-left: auto;
        margin-right: auto;
    }

    .hour-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
        /* background: var(--md-sys-color-surface-container); Removed container bg for cleaner look with circles */
        padding: 4px;
        border-radius: 12px;
        width: 100%;
    }

    .hour-label {
        font: var(--md-sys-typescale-body-small);
        color: var(--md-sys-color-on-surface-variant);
        font-size: 0.7rem;
    }

    /* Circular Smart Stepper */
    .hour-item .smart-stepper {
        width: 44px;
        /* Fixed size */
        height: 44px;
        border-radius: 50%;
        /* Circle */
        font-size: 0.9rem;
        padding: 0;
        /* Reset padding */
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    /* Footer Actions */
    .card-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 12px;
        padding-top: 12px;
        border-top: 1px dashed var(--md-sys-color-outline-variant);
    }

    .remark-text {
        font: var(--md-sys-typescale-body-medium);
        color: var(--md-sys-color-on-surface-variant);
        font-style: italic;
    }

    .card-actions {
        display: flex;
        gap: 8px;
    }

    .action-btn {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        background: transparent;
        color: var(--md-sys-color-on-surface-variant);
        cursor: pointer;
        transition: background 0.2s;
    }

    .action-btn:hover {
        background: var(--md-sys-color-surface-container);
        color: var(--md-sys-color-on-surface);
    }

    .action-btn.delete {
        color: #ba1a1a;
    }

    .action-btn.delete:hover {
        background: #ffdad6;
        color: #410002;
    }

    /* Desktop Adaptation (Calendar View) */
    @media (min-width: 1024px) {
        #tableContainer {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            /* Sun - Sat */
            grid-auto-flow: dense;
            /* Fix staircase effect */
            gap: 12px;
            max-width: 1400px;
            /* Wider for calendar */
        }

        .calendar-header {
            display: grid;
            max-width: 1400px;
            margin: 0 auto 12px auto;
        }

        .data-card {
            min-width: 0;
            /* Allow shrinking */
            display: flex;
            flex-direction: column;
            height: 100%;
            /* Uniform height */
        }

        /* Desktop Card Layout Override */
        .card-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 8px;
        }

        .card-primary-info {
            width: 100%;
            justify-content: space-between;
        }

        .card-secondary-info {
            width: 100%;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .card-expand-icon {
            display: none;
            /* Hide expand icon on desktop if we want cleaner look, or keep it */
        }
    }

    /* 膠囊樣式 */
    .capsule {
        padding: 4px 10px;
        border-radius: 999px;
        margin: 2px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 0.85rem;
        border: 1px solid rgba(255, 255, 255, 0.35);
        backdrop-filter: blur(14px) saturate(140%);
        -webkit-backdrop-filter: blur(14px) saturate(140%);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
    }

    .capsule.green {
        background: linear-gradient(135deg,
                rgba(160, 231, 160, 0.9),
                rgba(160, 231, 160, 0.6));
        color: #0f2a0f;
        border-color: rgba(160, 231, 160, 0.9);
    }

    .capsule.orange {
        background: linear-gradient(135deg,
                rgba(255, 200, 124, 0.9),
                rgba(255, 200, 124, 0.6));
        color: #4a2c07;
        border-color: rgba(255, 200, 124, 0.9);
    }

    .capsule.gray {
        background: linear-gradient(135deg,
                rgba(224, 224, 224, 0.9),
                rgba(224, 224, 224, 0.5));
        color: #111;
        border-color: rgba(224, 224, 224, 0.9);
    }

    /* OT 與總計字體加粗 */
    .ot-value {
        font-weight: bold;
        font-size: 1rem;
    }

    .total-value {
        font-weight: bold;
        font-size: 1rem;
    }

    /* Dashboard 專用數值膠囊 */
    .dashboard-value {
        font-weight: bold;
        font-size: 1rem;
        display: inline-block;
        transform-origin: center bottom;
    }

    /* 子列（Base / Travel / OT Salary 細節區） */
    .detail-row {
        background: transparent;
    }

    .detail-row>td {
        padding: 0 !important;
        border-bottom: none;
        background: rgba(230, 230, 230, 0.95);
        width: 100%;
    }

    .detail-wrapper {
        display: none;
        flex-direction: row;
        flex-wrap: wrap;
        gap: 8px;
        padding: 8px 16px 12px;
        width: 100%;
        min-height: 50px;
        opacity: 0;
        transform: translateY(-4px);
        transition: opacity 0.3s ease, transform 0.3s ease;
        justify-content: flex-start;
    }

    /* 展開狀態 - 增加優先級 */
    .detail-row.open .detail-wrapper,
    tr.detail-row.open .detail-wrapper {
        display: flex !important;
        opacity: 1 !important;
        transform: translateY(0) !important;
    }

    /* 讓 label 與膠囊改成左右排列 */
    .detail-chip {
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 6px;
        min-width: 80px;
        flex-shrink: 0;
    }

    /* 子清單內 Travel 左側小 toggle */
    .travel-toggle-inline {
        width: 22px;
        height: 22px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.45);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg,
                rgba(160, 160, 160, 0.95),
                rgba(120, 120, 120, 0.85));
        cursor: pointer;
        box-shadow: 0 6px 14px rgba(0, 0, 0, 0.18);
        padding: 0;
    }

    .travel-toggle-inline.on {
        background: linear-gradient(135deg,
                rgba(0, 122, 255, 0.95),
                rgba(0, 122, 255, 0.75));
    }

    .detail-label {
        font-size: 0.8rem;
        opacity: 1;
        margin-left: 0;
        color: #191919;
    }

    .detail-value {
        font-size: 0.9rem;
        font-weight: 600;
        color: #1d1d1f;
        padding: 4px 12px;
        border-radius: 12px;
        min-height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    /* 每列右側刪除小圓點與確認氣泡 */
    .row-delete-wrapper {
        position: absolute;
        top: 50%;
        right: 2px;
        /* 保持貼齊儲存格右側，避免被瀏覽器裁切 */
        left: auto;
        transform: translateY(-50%);
        display: flex;
        align-items: center;
        justify-content: center;
        pointer-events: none;
        /* 由內部按鈕接收事件 */
        z-index: 15;
        /* 確保浮在列背景之上 */
    }


    .row-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        padding: 0;
        border: none;
        background: #b4b4b4;
        box-shadow: none;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        color: transparent;
        /* 隱藏原文字，改用 ::before 顯示 */
        pointer-events: auto;
    }

    .row-dot::before {
        content: '';
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: #6d6d6d;
        display: block;
    }

    .row-dot:hover {
        background: #e53935;
        transform: scale(3);
    }

    .row-dot:hover::before {
        content: '×';
        padding-left: 14px;
        width: auto;
        height: auto;
        background: transparent;
        color: #fff;
        font-size: 0.4rem;
        line-height: 1;
    }

    /* 刪除確認氣泡 */
    .delete-bubble {
        position: absolute;
        top: 50%;
        right: 26px;
        transform: translateY(-50%) translateX(8px);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.18s ease, transform 0.18s ease;
        z-index: 20;
    }

    .delete-bubble.open {
        opacity: 1;
        pointer-events: auto;
        transform: translateY(-50%) translateX(0);
    }

    .delete-bubble-content {
        background: rgba(0, 0, 0, 0.82);
        color: #fff;
        padding: 8px 12px;
        border-radius: 12px;
        font-size: 0.78rem;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
        white-space: nowrap;
    }

    .delete-bubble-content p {
        margin: 0 0 6px;
    }

    .delete-bubble-actions {
        display: flex;
        gap: 6px;
        justify-content: flex-end;
    }

    .delete-bubble-actions .delete-confirm,
    .delete-bubble-actions .delete-cancel {
        padding: 2px 8px;
        border-radius: 999px;
        border: none;
        box-shadow: none;
        font-size: 0.75rem;
        cursor: pointer;
    }

    .delete-bubble-actions .delete-confirm {
        background: #e53935;
        color: #fff;
    }

    .delete-bubble-actions .delete-cancel {
        background: rgba(255, 255, 255, 0.16);
        color: #fff;
    }

    .flip {
        animation: flip-card 0.4s ease;
    }

    @keyframes flip-card {
        0% {
            transform: rotateX(0deg);
            opacity: 1;
        }

        50% {
            transform: rotateX(90deg);
            opacity: 0.2;
        }

        100% {
            transform: rotateX(0deg);
            opacity: 1;
        }
    }

    /* 若 icon-button 被設定成正方形，統一視覺為圓形 */
    .icon-button[style*="width: 44px"],
    .icon-button[style*="height: 44px"] {
        border-radius: 999px;
    }

    /* 手機版響應式版面調整 */
    @media (max-width: 1024px) {
        body {
            padding: 8px 10px;
            /* 左右預留安全距離，且左右對稱 */
            font-size: 16px;
        }

        .container {
            flex-direction: column;
            gap: 16px;
            align-items: stretch;
        }

        .left-panel {
            position: static;
            width: 100%;
            gap: 10px;
        }

        .card,
        .logo-card {
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }

        .right-panel {
            width: 100%;
            flex: 1;
        }

        /* 手機版：避免內容超出螢幕寬度 */
        .container,
        .right-panel,
        table {
            max-width: 100%;
            box-sizing: border-box;
        }

        /* 新增卡片在手機版不固定在畫面頂部，跟著內容往下 */
        .add-card {
            position: static;
            top: auto;
            margin-top: 4px;
        }

        /* 手機版：新增列日期輸入欄縮短，避免擠壓其他欄位 */
        .add-card input[type="date"] {
            flex: 0 0 130px;
            max-width: 130px;
            width: 130px;
        }

        /* 手機版顯示「查看加班明細」按鈕 */
        .mobile-table-toggle {
            display: inline-flex;
            margin-top: 4px;
            width: 100%;
        }

        .mobile-table-toggle-label {
            font-size: 0.9rem;
        }

        /* 手機版表格更緊湊（僅套用在主 OT 表格） */
        #tableSection th,
        #tableSection td {
            padding: 6px 4px;
            font-size: 0.78rem;
        }

        .capsule {
            padding: 2px 6px;
            font-size: 0.78rem;
        }

        /* 手機版加班時數調整箭頭放大，點擊區域更友善 */
        .ot-arrow {
            font-size: 1.15rem;
            padding: 3px;
        }

        .ot-arrow .material-symbols-outlined {
            font-size: 1.6rem;
        }

        /* 手機版隱藏備註欄位（假設為最後一欄，限定主 OT 表格） */
        #tableSection thead th:last-child,
        #tableSection tbody td:last-child {
            display: none;
        }

        thead th {
            top: 0;
        }
    }

    /* 桌機版預設隱藏 mobile-table-toggle（上面 media query 會覆蓋） */
    /* 通知氣泡內文左右排版：標題靠左，數字靠右 */
    .ot-notify-bubble .notify-row {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        gap: 12px;
        margin: 2px 0;
    }

    .ot-notify-bubble .notify-label {
        flex: 1;
        text-align: left;
        white-space: nowrap;
        font-size: 0.9em;
        opacity: 0.9;
    }

    .ot-notify-bubble .notify-value {
        text-align: right;
        font-size: 1em;
        font-variant-numeric: tabular-nums;
        white-space: nowrap;
        margin-left: 12px;
    }

    .mobile-table-toggle {
        display: none;
    }

    /* ========== Analytics 頁面樣式 ========== */
    .analytics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        padding: 0 20px;
    }

    .month-selector-card {
        grid-column: 1 / -1;
    }

    .month-picker {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-top: 12px;
    }

    .month-picker select {
        flex: 1;
        padding: 10px 16px;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.45);
        background: rgba(207, 207, 207, 0.95);
        font-family: var(--font-system);
        font-size: 0.95rem;
        font-weight: 600;
        color: #111;
        outline: none;
        transition: all var(--duration-fast) var(--easing-standard);
    }

    .month-nav {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: none;
        background: var(--color-primary);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: var(--elevation-2);
    }

    .stats-cards-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 12px;
        grid-column: 1 / -1;
    }

    .stat-card {
        padding: 20px 16px;
        background: rgba(255, 255, 255, 0.16);
        backdrop-filter: blur(20px) saturate(160%);
        border-radius: 20px;
        border: 1px solid rgba(255, 255, 255, 0.4);
        box-shadow: var(--elevation-2);
        text-align: center;
        transition: all var(--duration-normal) var(--easing-standard);
        cursor: pointer;
    }

    .stat-card:hover {
        transform: translateY(-6px) scale(1.02);
        box-shadow: var(--elevation-4);
    }

    .stat-icon {
        font-size: 2.8rem;
        display: block;
        margin-bottom: 10px;
    }

    .stat-value {
        font-size: 2.2rem;
        font-weight: 800;
        color: var(--color-primary);
    }

    .stat-label {
        font-size: 0.85rem;
        color: rgba(0, 0, 0, 0.65);
        font-weight: 600;
    }

    .chart-card {
        grid-column: span 2;
        min-height: 420px;
        padding: 24px;
    }

    .chart-card canvas {
        max-height: 360px;
        width: 100% !important;
    }

    /* Number Stepper */
    .number-stepper {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 6px 10px;
        background: rgba(255, 255, 255, 0.18);
        backdrop-filter: blur(12px);
        border-radius: 999px;
        box-shadow: var(--elevation-1);
    }

    .stepper-btn {
        width: 34px;
        height: 34px;
        border-radius: 50%;
        border: none;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        box-shadow: var(--elevation-1);
        padding: 0;
        margin: 0;
    }

    .stepper-btn:hover {
        transform: scale(1.15);
    }

    .stepper-btn.minus {
        background: linear-gradient(135deg, #FF6B6B, #EE5A6F);
    }

    .stepper-btn.plus {
        background: linear-gradient(135deg, var(--color-success), #2ecc71);
    }

    .stepper-value {
        min-width: 42px;
        text-align: center;
        font-weight: 700;
        font-size: 1.15rem;
    }

    /* Ripple */
    .ripple {
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.7);
        transform: scale(0);
        animation: ripple-animation 0.6s var(--easing-decelerate);
        pointer-events: none;
    }

    @keyframes ripple-animation {
        to {
            transform: scale(4);
            opacity: 0;
        }
    }

    /* Number Stepper 玻璃風格 */
    .number-stepper {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 6px 10px;
        background: rgba(255, 255, 255, 0.18);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.35);
        box-shadow: var(--elevation-1);
    }

    .stepper-btn {
        width: 34px;
        height: 34px;
        min-width: 34px;
        border-radius: 50%;
        border: 1px solid rgba(255, 255, 255, 0.4);
        background: rgba(255, 255, 255, 0.25);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        color: rgba(0, 0, 0, 0.75);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all var(--duration-fast) var(--easing-standard);
        position: relative;
        overflow: hidden;
        box-shadow: var(--elevation-1);
        padding: 0;
        margin: 0;
    }

    .stepper-btn:hover {
        transform: scale(1.15);
        box-shadow: var(--elevation-3);
        background: rgba(255, 255, 255, 0.35);
    }

    .stepper-btn:active {
        transform: scale(0.92);
        box-shadow: var(--elevation-1);
    }

    .stepper-btn.minus:hover {
        background: rgba(255, 107, 107, 0.25);
        border-color: rgba(255, 107, 107, 0.4);
    }

    .stepper-btn.plus:hover {
        background: rgba(52, 199, 89, 0.25);
        border-color: rgba(52, 199, 89, 0.4);
    }

    .stepper-btn .material-symbols-outlined {
        font-size: 20px;
        line-height: 1;
        font-weight: 600;
    }

    .stepper-value {
        min-width: 42px;
        text-align: center;
        font-weight: 700;
        font-size: 1.15rem;
        color: #111;
        font-family: var(--font-system);
        user-select: none;
    }

    /* Analytics 優化 - 減少空白 */
    .analytics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 16px;
        padding: 0 16px;
    }

    .chart-card {
        grid-column: span 2;
        min-height: 380px;
        padding: 20px;
    }

    .stat-icon {
        font-size: 2.4rem !important;
        display: block;
        margin-bottom: 8px;
        color: var(--color-primary);
    }

    /* Spin 動畫 */
    @keyframes spin {
        from {
            transform: rotate(0deg);
        }

        to {
            transform: rotate(360deg);
        }
    }


    /* ========== UX 優化樣式 ========== */

    /* Stepper 按鈕：預設透明白色，hover 才顯示顏色 */
    .stepper-btn {
        width: 34px !important;
        height: 34px !important;
        border: 1px solid rgba(255, 255, 255, 0.4) !important;
        background: rgba(255, 255, 255, 0.2) !important;
        color: rgba(0, 0, 0, 0.5) !important;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12) !important;
    }

    .stepper-btn:hover {
        transform: scale(1.15) !important;
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16) !important;
    }

    .stepper-btn.minus:hover {
        background: rgba(255, 107, 107, 0.3) !important;
        border-color: rgba(255, 107, 107, 0.6) !important;
        color: rgba(255, 59, 48, 0.9) !important;
    }

    .stepper-btn.plus:hover {
        background: rgba(52, 199, 89, 0.3) !important;
        border-color: rgba(52, 199, 89, 0.6) !important;
        color: rgba(52, 199, 89, 0.9) !important;
    }

    /* 數字：0時為灰色細字，>0才為黑色粗體 */
    .stepper-value {
        font-weight: 400 !important;
        color: rgba(0, 0, 0, 0.4) !important;
    }

    .stepper-value.has-value {
        font-weight: 700 !important;
        color: #111 !important;
    }

    /* 分頁導航固定頂部 */
    body>.tab-navigation {
        margin: 20px auto !important;
        max-width: 400px !important;
        position: sticky;
        top: 20px;
        z-index: 100;
    }

    /* Analytics 緊湊布局 */
    .analytics-grid {
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)) !important;
        gap: 14px !important;
        padding: 0 14px !important;
        max-width: 1400px;
        margin: 0 auto;
    }

    .month-selector-card {
        padding: 16px !important;
    }

    .stats-cards-row {
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)) !important;
        gap: 10px !important;
    }

    .stat-card {
        padding: 16px 12px !important;
    }

    .chart-card {
        grid-column: span 1 !important;
        min-height: 320px !important;
        padding: 18px !important;
    }

    .chart-card canvas {
        max-height: 280px !important;
    }

    @media (min-width: 1024px) {
        .chart-card {
            grid-column: span 2 !important;
        }
    }

    /* 優化刪除按鈕 */
    .row-dot {
        width: 28px !important;
        height: 28px !important;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.35);
        backdrop-filter: blur(8px);
        transition: all 0.2s ease;
        font-size: 16px;
        color: rgba(0, 0, 0, 0.4);
    }

    .row-dot:hover {
        background: rgba(255, 59, 48, 0.15) !important;
        border-color: rgba(255, 59, 48, 0.4) !important;
        color: rgba(255, 59, 48, 0.9) !important;
        transform: scale(1.1);
    }

    .delete-confirm {
        background: rgba(255, 59, 48, 0.9) !important;
        color: white !important;
        border-color: rgba(255, 59, 48, 1) !important;
    }

    /* 手機版響應式優化 */
    @media (max-width: 768px) {
        /* 隱藏次要欄位 */
        th:nth-child(6),
        td:nth-child(6),
        /* 費用 Total */
        th:nth-child(7),
        td:nth-child(7),
        /* 月薪 */
        th:nth-child(8),
        td:nth-child(8)

        /* 備註 */
            {
            display: none;
        }

        /* 調整表格容器 */
        #tableContainer {
            overflow-x: hidden;
            /* 禁止橫向捲動 */
            width: 100%;
        }

        table {
            width: 100%;
            table-layout: fixed;
        }

        /* 調整欄寬分配 */
        th:nth-child(1) {
            width: 25%;
        }

        /* 日期 */
        th:nth-child(2),
        th:nth-child(3),
        th:nth-child(4),
        th:nth-child(5) {
            width: 15%;
        }

        /* OT */
        th:last-child {
            width: 15%;
        }

        /* 刪除 */

        /* 在子選單顯示隱藏的資訊 */
        .mobile-detail-item {
            display: flex !important;
        }
    }

    /* 桌面版隱藏手機專用資訊 */
    .mobile-detail-item {
        display: none;
    }

    /* Mobile Toggle Button for Table Rows */
    .mobile-toggle-btn {
        display: none;
        position: absolute;
        left: 4px;
        top: 50%;
        transform: translateY(-50%);
        width: 28px;
        height: 28px;
        padding: 0;
        border: none;
        background: rgba(0, 122, 255, 0.1);
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.2s ease;
        z-index: 10;
        align-items: center;
        justify-content: center;
    }

    .mobile-toggle-btn .material-symbols-outlined {
        font-size: 20px;
        color: var(--color-primary);
        transition: transform 0.2s ease;
    }

    .mobile-toggle-btn.open .material-symbols-outlined {
        transform: rotate(180deg);
    }

    .mobile-toggle-btn:active {
        background: rgba(0, 122, 255, 0.2);
        transform: translateY(-50%) scale(0.95);
    }

    @media (max-width: 768px) {
        .mobile-toggle-btn {
            display: flex;
        }

        /* 確保日期欄位有足夠空間容納按鈕 */
        table td:first-child {
            padding-left: 40px !important;
        }
    }

    /* Smart Stepper (Drag-to-Adjust) */
    .smart-stepper {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 48px;
        height: 32px;
        background: rgba(255, 255, 255, 0.5);
        border: 1px solid rgba(0, 0, 0, 0.1);
        border-radius: 16px;
        font-weight: 600;
        font-size: 14px;
        color: #333;
        cursor: ns-resize;
        /* 上下拖曳游標 */
        user-select: none;
        transition: all 0.2s ease;
        position: relative;
        overflow: hidden;
    }

    .smart-stepper:hover {
        background: rgba(255, 255, 255, 0.8);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .smart-stepper.active {
        background: var(--color-primary);
        color: white;
        border-color: transparent;
        transform: scale(1.1);
        box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);
        cursor: grabbing;
    }

    .smart-stepper.has-value {
        background: rgba(255, 255, 255, 0.9);
        color: #000;
        border-color: rgba(0, 0, 0, 0.2);
        font-weight: 700;
    }

    /* Analytics macOS Style Grid */
    .analytics-container {
        display: grid;
        grid-template-columns: repeat(12, 1fr);
        gap: 24px;
        padding: 32px 24px;
        max-width: 1400px;
        margin: 0 auto;
    }

    .analytics-header {
        grid-column: span 12;
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
    }

    .analytics-header h2 {
        font-size: 2rem;
        font-weight: 700;
        color: #1d1d1f;
        margin: 0;
    }

    /* 篩選 Bar 優化 */
    .month-filter-wrapper {
        position: relative;
    }

    .month-select {
        appearance: none;
        -webkit-appearance: none;
        padding: 12px 40px 12px 20px;
        background: rgba(255, 255, 255, 0.9);
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 12px;
        font-size: 0.95rem;
        font-weight: 600;
        color: #1d1d1f;
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        min-width: 180px;
    }

    .month-select:hover {
        background: rgba(255, 255, 255, 1);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        border-color: rgba(0, 122, 255, 0.3);
    }

    .month-select:focus {
        outline: none;
        border-color: var(--color-primary);
        box-shadow: 0 4px 16px rgba(0, 122, 255, 0.15);
    }

    .stats-columns {
        grid-column: span 12;
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
    }

    .stat-column-card {
        background: rgba(255, 255, 255, 0.75);
        backdrop-filter: blur(30px);
        -webkit-backdrop-filter: blur(30px);
        border-radius: 20px;
        padding: 28px;
        border: 1px solid rgba(255, 255, 255, 0.6);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.06);
        transition: all 0.3s ease;
    }

    .stat-column-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.1);
    }

    .column-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 20px;
        padding-bottom: 16px;
        border-bottom: 2px solid rgba(0, 0, 0, 0.06);
    }

    .column-header h3 {
        margin: 0;
        font-size: 1.1rem;
        font-weight: 700;
        color: #1d1d1f;
    }

    .column-header .material-symbols-outlined {
        font-size: 28px;
    }

    .icon-blue {
        color: var(--color-primary);
    }

    .icon-green {
        color: var(--color-success);
    }

    .icon-orange {
        color: var(--color-warning);
    }

    .stat-list {
        display: flex;
        flex-direction: column;
        gap: 14px;
    }

    .stat-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 16px;
        background: rgba(0, 0, 0, 0.02);
        border-radius: 12px;
        transition: all 0.2s ease;
    }

    .stat-item:hover {
        background: rgba(0, 122, 255, 0.05);
        transform: translateX(4px);
    }

    .stat-item .label {
        font-size: 0.9rem;
        font-weight: 500;
        color: #6e6e73;
    }

    .stat-item .value {
        font-size: 1.4rem;
        font-weight: 800;
        color: #1d1d1f;
        font-variant-numeric: tabular-nums;
        background: linear-gradient(135deg, #007AFF 0%, #5AC8FA 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .stat-item .value.highlight {
        font-size: 1.6rem;
        background: linear-gradient(135deg, #FF9500 0%, #FF3B30 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .chart-section {
        grid-column: span 12;
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
    }

    .chart-card {
        background: rgba(255, 255, 255, 0.75);
        backdrop-filter: blur(30px);
        -webkit-backdrop-filter: blur(30px);
        border-radius: 20px;
        padding: 28px;
        border: 1px solid rgba(255, 255, 255, 0.6);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.06);
        min-height: 360px;
    }

    .chart-card h3 {
        margin: 0 0 20px 0;
        font-size: 1.2rem;
        font-weight: 700;
        color: #1d1d1f;
    }

    @media (max-width: 1024px) {
        .stats-columns {
            grid-template-columns: 1fr;
        }

        .chart-section {
            grid-template-columns: 1fr;
        }
    }

    /* 配合左側導航調整主內容區域 */
    @media (min-width: 769px) {
        body {
            padding-left: 260px;
        }

        .container {
            padding: 20px;
        }

        .tab-navigation {
            top: 0;
            left: 0;
            border-radius: 0;
        }

        .left-panel {
            padding-top: 0;
        }

        .analytics-container {
            padding-top: 32px;
        }
    }

    @media (max-width: 768px) {
        .container {
            padding: 16px;
        }

        .analytics-container {
            padding: 20px 16px;
        }
    }
</style>